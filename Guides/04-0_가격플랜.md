# 가격 플랜

---

<aside>
💡 **본 항목은 스텝페이의 가격플랜에 대한 개념을 설명합니다. 스텝페이에서 '가격플랜'은 판매할 아이템의 가격 정책을 의미합니다.**

</aside>

# 연관된 가이드

- [인증](./01_인증.md)
- [상품](./03_상품.md)
- [사용량 기반](04-1_사용량.md)
- [계정수 기반](04-2_계정수.md)

# 가격 플랜 생성

## Overview

 가격 플랜 **생성 기능은 사용자가 새로운 가격 플랜을 상품ㅇ 추가할 수 있습니다. 하나의 상품에는 여러 가격 플랜이 설정가능합나디. 이는 '가격플랜 생성' API를 통해 생성할 수 있습니다. 이 가이드에서는 가격플랜 생성 API에 대해 설명합니다.**

## 가격 플랜 종류

스텝페이에서는 크게 **ONE_TIME, FLAT, BUNDLE, USAGE_BASED, UNIT_BASED** 유형의 타입을 지원합니다.

### 단건

**ONE_TIME:** `ONE_TIME` 가격 플랜은 한 번의 단일 구매에 대한 설정입니다. 이는 일회성 제품이나 서비스에 적용되며, 이 옵션은 고객이 한 번만 청구되고 다시는 구독되거나 청구되지 않습니다.

### 스텝페이 API 사용 예시

- **Request 예시**
    
    ```json
    curl --request POST \
         --url https://api.steppay.kr/api/v1/products/{product_id}/prices \
         --header 'Secret-Token: ' \
         --header 'accept: */*' \
         --header 'content-type: application/json' \
         --data '
    {
      "plan": {
        "name": "string",
        "description": "string"
      },
      "type": "ONE_TIME",
      "firstSale": {
        "enabled": false,
        "price": 0
      },
      "claim": {
        "methodType": "PRE",
        "whenToClaimType": "FIRST_PAYMENT",
        "billingDate": 0,
        "provideStartDay": 0
      },
      "setupOption": {
        "type": "INITIALLY",
        "claimMethodType": "PRE",
        "name": "string",
        "price": 0
      },
      "options": [
        {
          "priceCode": {price_code}
        }
      ],
      "recurring": {
        "interval": "DAY",
        "aggregateUsageType": "SUM",
        "usageType": "LICENSED",
        "intervalCount": 0
      },
      "price": 1000,
      "unit": "string",
      "maximumPurchaseQuantity": 0,
      "membershipExpirationDate": 0,
      "membershipExpirationDateType": "DAY",
      "basicServing": 0,
      "isRepresentative": true
    }
    '
    ```
    

### 구독

**FLAT: `FLAT`** 가격 플랜은 고정된 요금의 구독 서비스를 의미합니다. 이 플랜은 고객이 정기적으로 청구되는 서비스, 예를 들어 쿠팡로켓와우 또는 유튜브뮤직과 같은 서비스에 사용됩니다.

### 스텝페이 API 사용 예시

- **Request 예시**
    
    ```json
    curl --request POST \
         --url https://api.steppay.kr/api/v1/products/{product_id}/prices \
         --header 'Secret-Token: ' \
         --header 'accept: */*' \
         --header 'content-type: application/json' \
         --data '
    {
      "plan": {
        "name": "string",
        "description": "string"
      },
      "type": "FLAT",
      "firstSale": {
        "enabled": false,
        "price": 0
      },
      "claim": {
        "methodType": "PRE",
        "whenToClaimType": "FIRST_PAYMENT",
        "billingDate": 0,
        "provideStartDay": 0
      },
      "setupOption": {
        "type": "INITIALLY",
        "claimMethodType": "PRE",
        "name": "string",
        "price": 0
      },
      "options": [
        {
          "priceCode": {price_code}
        }
      ],
      "recurring": {
        "interval": "DAY",
        "aggregateUsageType": "SUM",
        "usageType": "LICENSED",
        "intervalCount": 0
      },
      "price": 1000,
      "unit": "string",
      "maximumPurchaseQuantity": 0,
      "membershipExpirationDate": 0,
      "membershipExpirationDateType": "DAY",
      "basicServing": 0,
      "isRepresentative": true
    }
    '
    ```
    

### 주의사항

⛔ **가격 플랜이 FLAT(구독)일 경우** **recurring(object)  필수 값**

### 번들

**BUNDLE: `BUNDLE`** 가격 플랜은 여러 제품이나 서비스를 하나의 패키지로 묶은 것을 의미합니다. 이는 고객이 번들 내의 여러 제품이나 서비스에 대해 한 가격을 지불함을 의미합니다.

번들의 각각의 아이템들은 사용량 기반 가격플랜을 제외하고 무시되어 지정된 구독 가격으로 설정됩니다. 또한  **ontimeBundlePrice**(번들 단건 가격)값 추가 시 첫 결제 금액에서는 해당 가격이 포함되서 결제됩니다. 번들 플랜의 상품을 주문 했을때 번들 상품들도 주문아이템에 추가됩니다.

### API 사용 예시

- **Request 예시**
    
    ```json
    curl --request POST \
         --url https://api.steppay.kr/api/v1/products/{product_id}/prices \
         --header 'Secret-Token: ' \
         --header 'accept: */*' \
         --header 'content-type: application/json' \
         --data '
    {
      "plan": {
        "name": "string",
        "description": "string"
      },
      "type": "BUNDLE",
      "firstSale": {
        "enabled": false,
        "price": 0
      },
      "claim": {
        "methodType": "PRE",
        "whenToClaimType": "FIRST_PAYMENT",
        "billingDate": 0,
        "provideStartDay": 0
      },
      "setupOption": {
        "type": "INITIALLY",
        "claimMethodType": "PRE",
        "name": "string",
        "price": 0
      },
      "options": [
        {
          "priceCode": {price_code}
        }
      ],
      "recurring": {
        "interval": "DAY",
        "aggregateUsageType": "SUM",
        "usageType": "LICENSED",
        "intervalCount": 0
      },
      "price": 1000,
      "unit": "string",
      "maximumPurchaseQuantity": 0,
      "membershipExpirationDate": 0,
      "membershipExpirationDateType": "DAY",
      "basicServing": 0,
      "isRepresentative": true,
      "onetimeBundlePrice" : 1000
    }
    '
    ```
    

### 사용량 기반

**USAGE_BASED: `USAGE_BASED`** 가격 플랜은 사용량에 따른 과금을 기반으로 합니다. SAAS 서비스나 클라우드 스토리지와 같이 사용량이 늘어날수록 요금이 증가하는 서비스에 이 플랜이 사용됩니다. 자세한 설명은 해당 [링크](./04-1_사용량.md)를 참고하세요.

### 계정수 기반

**UNIT_BASED(계정수 기반): `UNIT_BASED`** 가격 플랜은 건당 과금을 기반으로 합니다. 이 플랜은 특정 작업이나 API 호출 등 각 단위 액션에 대한 요금을 정의하는데 사용됩니다. 베이스 가격이 존재하므로, 단위 수에 따라 총 요금이 계산됩니다. 자세한 설명은 해당 [링크](04-2_계정수.md)를 참고하세요.

## 스텝페이 포탈 사용 예시

---

# 가격 플랜 부가 기능

## 공통

### 첫 결제 할인

고객이 상품 첫 구매 시, 최초 주문 시에 할인가로 제공하도록 하고 있습니다.

### 기본료/도입비/설치비

기본료, 도입비, 설치비를 1회성 및 정기적으로 추가 과금 할 수 있습니다.

## 구독

### 구독 종료되는 만기 지정

구독이 갱신되는 횟수를 일, 주, 월, 년 단위로 지정할 수 있습니다. 

### 후불 결제

후불로 결제 받을 수 있는 기능입니다. (사용량 기반일 경우 유용합니다.)